---
title: "Data Mining"
output: html_document
date: "2024-03-28"
---

```{r}
# Load the required library
library(dplyr)

# Read the data
election <- read.csv("https://ecoleman451.github.io/ecoleman/w9/PresidentialElection2000To2020.csv")

# County-level Data
county_data <- election %>%
  group_by(year, state, county_name) %>%
  mutate(party_percentage = candidatevotes / sum(candidatevotes) * 100) %>%
  filter(party_percentage == max(party_percentage)) %>%
  select(year, state, party, candidate, candidatevotes, party_percentage)

# State-level Data
state_data <- election %>%
  group_by(year, state) %>%
  mutate(party_percentage = candidatevotes / sum(candidatevotes) * 100) %>%
  filter(party_percentage == max(party_percentage)) %>%
  select(year, state, party, candidate, candidatevotes, party_percentage)

# Print the first few rows of each subset
print("County-level Data:")
head(county_data)

print("State-level Data:")
head(state_data)

# Save county-level data to a new CSV file
write.csv(county_data, file = "county_level_data.csv", row.names = FALSE)

# Save state-level data to a new CSV file
write.csv(state_data, file = "state_level_data.csv", row.names = FALSE)
```

